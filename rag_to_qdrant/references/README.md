# rag_to_qdrant æŠ€æœ¯å‚è€ƒæ–‡æ¡£

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   jxh_data ç›®å½•  â”‚
â”‚  (.md .txt .json)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FileScanner    â”‚
â”‚  (hash å¯¹æ¯”)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ContentReader   â”‚
â”‚  (æ–‡ä»¶è¯»å–)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   BGE-M3        â”‚
â”‚  (Ollama)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Qdrant       â”‚
â”‚ (å‘é‡å­˜å‚¨)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Telegram RAG    â”‚
â”‚   (æ£€ç´¢)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Hash å¯¹æ¯”æœºåˆ¶

### çŠ¶æ€æ–‡ä»¶ç»“æ„

```json
{
  "docs/README.md": "d41d8cd98f00b204e9800998ecf8427e",
  "notes/todo.txt": "c4ca4238a0b923820dcc509a6f75849b",
  "data/config.json": "e10adc3949ba59abbe56e057f20f883e"
}
```

### æ£€æµ‹æµç¨‹

1. è®¡ç®—å½“å‰æ–‡ä»¶ MD5
2. ä¸çŠ¶æ€æ–‡ä»¶å¯¹æ¯”
3. æ–°å¢ â†’ åŠ å…¥å¤„ç†é˜Ÿåˆ—
4. å˜åŒ– â†’ é‡æ–°å¤„ç†
5. åˆ é™¤ â†’ ä» Qdrant ç§»é™¤

## BGE-M3 é…ç½®

### Ollama æ¨¡å‹å‚æ•°

```python
{
    "model": "bge-m3",
    "prompt": "å¾…å‘é‡åŒ–çš„æ–‡æœ¬",
    "options": {
        "temperature": 0,  # å›ºå®šä¸º 0ï¼Œç¡®ä¿ä¸€è‡´æ€§
        "top_k": 1
    }
}
```

### å‘é‡ç»´åº¦

- BGE-M3 è¾“å‡ºç»´åº¦: **1024**
- è·ç¦»åº¦é‡: Cosine

## Qdrant é›†åˆé…ç½®

```json
{
    "name": "jxh_data_rag",
    "vectors": {
        "size": 1024,
        "distance": "Cosine"
    }
}
```

## æ‰¹é‡å¤„ç†ä¼˜åŒ–

### å†™å…¥ç­–ç•¥

- æ‰¹é‡å¤§å°: 100 points/è¯·æ±‚
- å†™å…¥å‰è‡ªåŠ¨åˆ›å»ºé›†åˆ
- å¤±è´¥é‡è¯•: 3 æ¬¡

### åˆ†å—ç­–ç•¥

- æœ€å¤§å—å¤§å°: 1000 tokens
- å—é‡å : æ— ï¼ˆé¿å…é‡å¤ï¼‰
- åˆ†å‰²ç¬¦: `\n\n`

## Telegram é›†æˆ

### æœç´¢å‘½ä»¤

```
/rag <æŸ¥è¯¢å†…å®¹> [æ•°é‡]
```

### è¿”å›æ ¼å¼

```
ğŸ” æœç´¢: ã€Œå…³é”®è¯ã€

---
[1] filename.md (ç›¸ä¼¼åº¦: 0.85)
æ¥æº: `/path/to/file.md`
å†…å®¹é¢„è§ˆ: ...å‰200å­—...
```

## æ•…éšœæ’æŸ¥

### Ollama é—®é¢˜

```bash
# æ£€æŸ¥ Ollama çŠ¶æ€
curl http://localhost:11434/api/tags

# æ‹‰å–æ¨¡å‹
ollama pull bge-m3

# æµ‹è¯•æ¨¡å‹
ollama run bge-m3 "Hello"
```

### Qdrant é—®é¢˜

```bash
# æ£€æŸ¥ Qdrant å¥åº·
curl http://localhost:6333/health

# æŸ¥çœ‹é›†åˆ
curl http://localhost:6333/collections
```

### æ—¥å¿—ä½ç½®

```bash
# Cron æ—¥å¿—
/tmp/rag_to_qdrant_YYYYMMDD.log

# ç¨‹åºæ—¥å¿—
~/.config/rag_to_qdrant/rag_to_qdrant.log
```
